{% extends "base.html" %}
{% block title %}My Wardrobe - Fashonsie{% endblock %}

{% block content %}
<div class="wardrobe-header">
    <h2>MyWardrobe</h2>
    <button onclick="toggleUploadForm()">+ Add Item</button>
</div>

<!-- Upload form -->
<div id="upload-form" class="upload-form" style="display: none;">
    <form action="{{ url_for('add_clothing_item') }}" method="post" enctype="multipart/form-data" class="upload-card">
        <div class="form-row">
            <div class="form-group">
                <label>Image:</label>
                <input type="file" name="image" required onchange="previewImage(event)" required>
                <img id="image-preview" style="max-width: 100px; margin-top: 10px;" />
                
                <label>Item name:</label>
                <input type="text" name="item_name">

                <label>Color:</label>
                <input type="text" name="color">

                <label>Season:</label>
                <select name="season" required>
                    <option value="">Select season</option>
                    <option value="Spring">Spring</option>
                    <option value="Summer">Summer</option>
                    <option value="Fall">Fall</option>
                    <option value="Winter">Winter</option>
                </select>
            </div>

            <div class="form-group" required>
                <label>Clothing Type:</label>
                <select name="type" required>
                    <option value="">Select Type</option>
                    <option value="Tops">Tops</option>
                    <option value="Pants">Pants</option>
                    <option value="Jackets">Jackets</option>
                </select>

                <label>Occasion:</label>
                <select name="occasion" required>
                    <option value="">Select Occasion</option>
                    <option value="Casual">Casual</option>
                    <option value="Formal">Formal</option>
                </select>

                <input type="submit" value="Upload Item">
            </div>
        </div>
    </form>
</div>

<!-- Filter Buttons -->
<div class="filters" data-type="type">
    <span>Filter by Type:</span>
    <button class="filter-btn active" onclick="filterWardrobe('all')">All</button>
    <button class="filter-btn" onclick="filterWardrobe('Tops')">Tops</button>
    <button class="filter-btn" onclick="filterWardrobe('Pants')">Pants</button>
    <button class="filter-btn" onclick="filterWardrobe('Jackets')">Jackets</button>
</div>

<!-- Item Gallery -->
<div class="wardrobe-gallery">
    {% for item in wardrobe_items %}
    <div class="wardrobe-item">
        <img src="{{ url_for('static', filename=item.image_path.replace('static/', '')) }}" alt="{{ item.item_name }}">
        <p> {{ item.item_name }}</p>
    </div>
    {% endfor %}
</div>

<script>
function toggleUploadForm() {
    const form = document.getElementById("upload-form");
    form.style.display = form.style.display === "none" ? "flex" : "none";
}

// Image preview on upload
function previewImage(event) {
    const preview = document.getElementById('image-preview');
    preview.src = URL.createObjectURL(event.target.files[0]);
}

// Wardrobe item filter
function filterWardrobe(type) {
    const buttons = document.querySelectorAll('.filters[data-type="type"] .filter-btn');
    buttons.forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');

    document.querySelectorAll('.wardrobe-item').forEach(item => {
        const itemType = item.getAttribute('data-type');
        if (type === 'all' || itemType === type) {
            item.style.display = '';
        } else {
            item.style.display = 'none';
        }
    });
}
</script>
{% endblock %}
